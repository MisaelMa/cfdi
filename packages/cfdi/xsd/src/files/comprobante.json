{
  "$id": "comprobante.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "This JSON Schema file was generated from comprobante on Fri Jun 30 2023 20:46:26 GMT-0500 (Eastern Standard Time).  For more information please see http://www.xsd2jsonschema.org",
  "description": "Schema tag attributes: xmlns:cfdi='http://www.sat.gob.mx/cfd/4' xmlns:xs='http://www.w3.org/2001/XMLSchema' xmlns:catCFDI='http://www.sat.gob.mx/sitio_internet/cfd/catalogos' xmlns:tdCFDI='http://www.sat.gob.mx/sitio_internet/cfd/tipoDatos/tdCFDI' targetNamespace='http://www.sat.gob.mx/cfd/4' elementFormDefault='qualified' attributeFormDefault='unqualified'",
  "properties": {
    "Comprobante": {
      "$ref": "#/definitions/Comprobante"
    }
  },
  "type": "object",
  "anyOf": [
    {
      "required": [
        "Comprobante"
      ]
    }
  ],
  "definitions": {
    "Comprobante": {
      "description": "Atributo requerido para incorporar el código postal del lugar de expedición del comprobante (domicilio de la matriz o de la sucursal).",
      "required": [
        "Emisor",
        "Receptor",
        "Conceptos",
        "@Version",
        "@Fecha",
        "@Sello",
        "@NoCertificado",
        "@Certificado",
        "@SubTotal",
        "@Moneda",
        "@Total",
        "@TipoDeComprobante",
        "@Exportacion",
        "@LugarExpedicion"
      ],
      "properties": {
        "InformacionGlobal": {
          "description": "Atributo requerido para expresar el mes o los meses al que corresponde la información del comprobante global.",
          "required": [
            "@Periodicidad",
            "@Meses",
            "@Año"
          ],
          "properties": {
            "@Periodicidad": {
              "$ref": "catCFDI.json#/definitions/c_Periodicidad"
            },
            "@Meses": {
              "$ref": "catCFDI.json#/definitions/c_Meses"
            },
            "@Año": {
              "description": "Atributo requerido para expresar el año al que corresponde la información del comprobante global.",
              "maximum": 32767,
              "minimum": 2021,
              "type": "integer"
            }
          }
        },
        "CfdiRelacionados": {
          "oneOf": [
            {},
            {
              "items": {},
              "type": "array"
            }
          ]
        },
        "Emisor": {
          "description": "Atributo requerido para incorporar la clave del régimen del contribuyente emisor al que aplicará el efecto fiscal de este comprobante.",
          "required": [
            "@Rfc",
            "@Nombre",
            "@RegimenFiscal"
          ],
          "properties": {
            "@Rfc": {
              "$ref": "tdCFDI.json#/definitions/t_RFC"
            },
            "@Nombre": {
              "description": "Atributo requerido para registrar el nombre, denominación o razón social del contribuyente inscrito en el RFC, del emisor del comprobante.",
              "maxLength": 300,
              "minLength": 1,
              "pattern": "[^|]{1,300}",
              "type": "string"
            },
            "@RegimenFiscal": {
              "$ref": "catCFDI.json#/definitions/c_RegimenFiscal"
            },
            "@FacAtrAdquirente": {
              "description": "Atributo condicional para expresar el número de operación proporcionado por el SAT cuando se trate de un comprobante a través de un PCECFDI o un PCGCFDISP.",
              "maxLength": 10,
              "minLength": 10,
              "pattern": "[0-9]{10}",
              "type": "string"
            }
          }
        },
        "Receptor": {
          "description": "Atributo requerido para expresar la clave del uso que dará a esta factura el receptor del CFDI.",
          "required": [
            "@Rfc",
            "@Nombre",
            "@DomicilioFiscalReceptor",
            "@RegimenFiscalReceptor",
            "@UsoCFDI"
          ],
          "properties": {
            "@Rfc": {
              "$ref": "tdCFDI.json#/definitions/t_RFC"
            },
            "@Nombre": {
              "description": "Atributo requerido para registrar el nombre(s), primer apellido, segundo apellido, según corresponda, denominación o razón social del contribuyente, inscrito en el RFC, del receptor del comprobante.",
              "maxLength": 300,
              "minLength": 1,
              "pattern": "[^|]{1,300}",
              "type": "string"
            },
            "@DomicilioFiscalReceptor": {
              "description": "Atributo requerido para registrar el código postal del domicilio fiscal del receptor del comprobante.",
              "maxLength": 5,
              "minLength": 5,
              "pattern": "[0-9]{5}",
              "type": "string"
            },
            "@ResidenciaFiscal": {
              "$ref": "catCFDI.json#/definitions/c_Pais"
            },
            "@NumRegIdTrib": {
              "description": "Atributo condicional para expresar el número de registro de identidad fiscal del receptor cuando sea residente en el extranjero. Es requerido cuando se incluya el complemento de comercio exterior.",
              "maxLength": 40,
              "minLength": 1,
              "type": "string"
            },
            "@RegimenFiscalReceptor": {
              "$ref": "catCFDI.json#/definitions/c_RegimenFiscal"
            },
            "@UsoCFDI": {
              "$ref": "catCFDI.json#/definitions/c_UsoCFDI"
            }
          }
        },
        "Conceptos": {
          "description": "Nodo requerido para listar los conceptos cubiertos por el comprobante.",
          "required": [
            "Concepto"
          ],
          "properties": {
            "Concepto": {
              "oneOf": [
                {},
                {
                  "items": {},
                  "type": "array"
                }
              ]
            }
          }
        },
        "Impuestos": {
          "description": "Atributo condicional para expresar el total de los impuestos trasladados que se desprenden de los conceptos expresados en el comprobante fiscal digital por Internet. No se permiten valores negativos. Es requerido cuando en los conceptos se registren impuestos trasladados.",
          "properties": {
            "Retenciones": {
              "description": "Nodo condicional para capturar los impuestos retenidos aplicables. Es requerido cuando en los conceptos se registre algún impuesto retenido.",
              "required": [
                "Retencion"
              ],
              "properties": {
                "Retencion": {
                  "oneOf": [
                    {},
                    {
                      "items": {},
                      "type": "array"
                    }
                  ]
                }
              }
            },
            "Traslados": {
              "description": "Nodo condicional para capturar los impuestos trasladados aplicables. Es requerido cuando en los conceptos se registre un impuesto trasladado.",
              "required": [
                "Traslado"
              ],
              "properties": {
                "Traslado": {
                  "oneOf": [
                    {},
                    {
                      "items": {},
                      "type": "array"
                    }
                  ]
                }
              }
            },
            "@TotalImpuestosRetenidos": {
              "$ref": "tdCFDI.json#/definitions/t_Importe"
            },
            "@TotalImpuestosTrasladados": {
              "$ref": "tdCFDI.json#/definitions/t_Importe"
            }
          }
        },
        "Complemento": {
          "description": "Nodo opcional donde se incluye el complemento Timbre Fiscal Digital de manera obligatoria y los nodos complementarios determinados por el SAT, de acuerdo con las disposiciones particulares para un sector o actividad específica."
        },
        "Addenda": {
          "description": "Nodo opcional para recibir las extensiones al presente formato que sean de utilidad al contribuyente. Para las reglas de uso del mismo, referirse al formato origen."
        },
        "@Version": {
          "description": "Atributo requerido con valor prefijado a 4.0 que indica la versión del estándar bajo el que se encuentra expresado el comprobante.",
          "type": "string"
        },
        "@Serie": {
          "description": "Atributo opcional para precisar la serie para control interno del contribuyente. Este atributo acepta una cadena de caracteres.",
          "maxLength": 25,
          "minLength": 1,
          "pattern": "[^|]{1,25}",
          "type": "string"
        },
        "@Folio": {
          "description": "Atributo opcional para control interno del contribuyente que expresa el folio del comprobante, acepta una cadena de caracteres.",
          "maxLength": 40,
          "minLength": 1,
          "pattern": "[^|]{1,40}",
          "type": "string"
        },
        "@Fecha": {
          "$ref": "tdCFDI.json#/definitions/t_FechaH"
        },
        "@Sello": {
          "description": "Atributo requerido para contener el sello digital del comprobante fiscal, al que hacen referencia las reglas de resolución miscelánea vigente. El sello debe ser expresado como una cadena de texto en formato Base 64.",
          "type": "string"
        },
        "@FormaPago": {
          "$ref": "catCFDI.json#/definitions/c_FormaPago"
        },
        "@NoCertificado": {
          "description": "Atributo requerido para expresar el número de serie del certificado de sello digital que ampara al comprobante, de acuerdo con el acuse correspondiente a 20 posiciones otorgado por el sistema del SAT.",
          "maxLength": 20,
          "minLength": 20,
          "pattern": "[0-9]{20}",
          "type": "string"
        },
        "@Certificado": {
          "description": "Atributo requerido que sirve para incorporar el certificado de sello digital que ampara al comprobante, como texto en formato base 64.",
          "type": "string"
        },
        "@CondicionesDePago": {
          "description": "Atributo condicional para expresar las condiciones comerciales aplicables para el pago del comprobante fiscal digital por Internet. Este atributo puede ser condicionado mediante atributos o complementos.",
          "maxLength": 1000,
          "minLength": 1,
          "pattern": "[^|]{1,1000}",
          "type": "string"
        },
        "@SubTotal": {
          "$ref": "tdCFDI.json#/definitions/t_Importe"
        },
        "@Descuento": {
          "$ref": "tdCFDI.json#/definitions/t_Importe"
        },
        "@Moneda": {
          "$ref": "catCFDI.json#/definitions/c_Moneda"
        },
        "@TipoCambio": {
          "description": "Atributo condicional para representar el tipo de cambio FIX conforme con la moneda usada. Es requerido cuando la clave de moneda es distinta de MXN y de XXX. El valor debe reflejar el número de pesos mexicanos que equivalen a una unidad de la divisa señalada en el atributo moneda. Si el valor está fuera del porcentaje aplicable a la moneda tomado del catálogo c_Moneda, el emisor debe obtener del PAC que vaya a timbrar el CFDI, de manera no automática, una clave de confirmación para ratificar que el valor es correcto e integrar dicha clave en el atributo Confirmacion.",
          "minimum": 0.000001,
          "type": "number"
        },
        "@Total": {
          "$ref": "tdCFDI.json#/definitions/t_Importe"
        },
        "@TipoDeComprobante": {
          "$ref": "catCFDI.json#/definitions/c_TipoDeComprobante"
        },
        "@Exportacion": {
          "$ref": "catCFDI.json#/definitions/c_Exportacion"
        },
        "@MetodoPago": {
          "$ref": "catCFDI.json#/definitions/c_MetodoPago"
        },
        "@LugarExpedicion": {
          "$ref": "catCFDI.json#/definitions/c_CodigoPostal"
        },
        "@Confirmacion": {
          "description": "Atributo condicional para registrar la clave de confirmación que entregue el PAC para expedir el comprobante con importes grandes, con un tipo de cambio fuera del rango establecido o con ambos casos. Es requerido cuando se registra un tipo de cambio o un total fuera del rango establecido.",
          "maxLength": 5,
          "minLength": 5,
          "pattern": "[0-9a-zA-Z]{5}",
          "type": "string"
        }
      },
      "type": "object"
    }
  }
}